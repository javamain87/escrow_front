import{f as m,h as q,c as n,a as l,i as x,j as p,g as r,k as b,F as v,l as u,t as V,u as g,o as s}from"./index-Pbdopq2T.js";import{a as f}from"./axios-CAeCZMf6.js";const U={class:"min-h-screen bg-gradient-to-b from-[#f8f9ff] to-[#e0eaff] text-[#1c1e21] px-6 py-10"},E={class:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8"},C={type:"submit",class:"w-full py-3 px-6 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition"},y="6Le4H1IrAAAAAAdlQGO8PmheqgyXB85164mkVS12",N={__name:"Step2",setup(P){const w=g(),o=m({role:"",payment:"",company:"",amount:"",description:"",deliveryTime:"",requesterName:"",requesterPhone:"",tradeCode:"",approvalPassword:"",name:"",requesterEmail:"",phone:"",recaptchaToken:""}),d=m(null),k=async()=>{if(!o.value.recaptchaToken){alert("reCAPTCHA 인증이 필요합니다.");return}try{let a={...o.value},e={};if(o.value.role==="buyer"){if(a.phone===""&&a.requesterEmail===""){alert("Email 또는 전화번호는 필수로 입력 해주셔야 합니다.");return}await f("/api/payment/register",a).then(t=>{e=t.data})}else if(o.value.role==="seller"){if(a.phone===""&&a.requesterEmail===""){alert("Email 또는 전화번호는 필수로 입력 해주셔야 합니다.");return}a={tradeCode:o.value.tradeCode,approvalPassword:o.value.approvalPassword,name:o.value.requesterName,phone:o.value.phone,requesterEmail:o.value.requesterEmail,company:o.value.company},await f("/api/payment/set-password",a).then(t=>{e=t.data})}alert("정상적으로 처리되었습니다."),w.push({path:"/success",query:{transactionId:e.tradeCode,transactionPassword:e.password,role:e.role}})}catch(a){console.error(a),alert("에러가 발생했습니다.")}};q(()=>{window.grecaptcha?i():window.onloadCallback=i});const i=()=>{window.grecaptcha.render(d.value,{sitekey:y,callback:a=>{o.value.recaptchaToken=a}})};return(a,e)=>(s(),n("section",U,[l("div",E,[e[31]||(e[31]=l("h2",{class:"text-2xl font-bold mb-6 text-center"},"거래 정보 입력",-1)),l("form",{onSubmit:x(k,["prevent"]),class:"space-y-6"},[l("div",null,[e[15]||(e[15]=l("label",{class:"block font-medium mb-1"},"역할 선택",-1)),r(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.role=t),class:"w-full border p-2 rounded",required:""},e[14]||(e[14]=[l("option",{disabled:"",value:""},"-- 선택하세요 --",-1),l("option",{value:"buyer"},"구매자",-1),l("option",{value:"seller"},"판매자",-1)]),512),[[b,o.value.role]])]),o.value.role==="buyer"?(s(),n(v,{key:0},[l("div",null,[e[16]||(e[16]=l("label",{class:"block font-medium mb-1"},"이름",-1)),r(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.requesterName=t),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.requesterName]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block font-medium mb-1"},"이메일",-1)),r(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.requesterEmail=t),type:"email",class:"w-full border p-2 rounded"},null,512),[[u,o.value.requesterEmail]])]),e[23]||(e[23]=l("label",{class:"block font-medium mb-1 mt-2"},"전화번호",-1)),r(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.phone=t),type:"tel",class:"w-full border p-2 rounded"},null,512),[[u,o.value.phone]]),l("div",null,[e[19]||(e[19]=l("label",{class:"block font-medium mb-1"},"결제 방식",-1)),r(l("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.payment=t),class:"w-full border p-2 rounded",required:""},e[18]||(e[18]=[l("option",{value:"bank"},"계좌이체",-1),l("option",{value:"coin"},"코인",-1)]),512),[[b,o.value.payment]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block font-medium mb-1"},"거래금액",-1)),r(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.amount=t),type:"number",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.amount]])]),l("div",null,[e[21]||(e[21]=l("label",{class:"block font-medium mb-1"},"거래내용",-1)),r(l("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.description=t),class:"w-full border p-2 rounded",rows:"3",required:""},null,512),[[u,o.value.description]])]),l("div",null,[e[22]||(e[22]=l("label",{class:"block font-medium mb-1"},"배송 예상 시간 (예: 3일)",-1)),r(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.deliveryTime=t),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.deliveryTime]])])],64)):p("",!0),o.value.role==="seller"?(s(),n(v,{key:1},[l("div",null,[e[24]||(e[24]=l("label",{class:"block font-medium mb-1"},"거래 ID",-1)),r(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.tradeCode=t),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.tradeCode]])]),l("div",null,[e[25]||(e[25]=l("label",{class:"block font-medium mb-1"},"이름",-1)),r(l("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.name=t),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.name]])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block font-medium mb-1"},"이메일",-1)),r(l("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.requesterEmail=t),type:"email",class:"w-full border p-2 rounded"},null,512),[[u,o.value.requesterEmail]])]),e[29]||(e[29]=l("label",{class:"block font-medium mb-1 mt-2"},"전화번호",-1)),r(l("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>o.value.phone=t),type:"tel",class:"w-full border p-2 rounded"},null,512),[[u,o.value.phone]]),l("div",null,[e[27]||(e[27]=l("label",{class:"block font-medium mb-1"},"상호명",-1)),r(l("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>o.value.company=t),type:"text",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.company]])]),l("div",null,[e[28]||(e[28]=l("label",{class:"block font-medium mb-1"},"비밀번호 설정",-1)),r(l("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>o.value.approvalPassword=t),type:"password",class:"w-full border p-2 rounded",required:""},null,512),[[u,o.value.approvalPassword]])])],64)):p("",!0),l("div",null,[e[30]||(e[30]=l("label",{class:"block font-medium mb-1"},"로봇이 아님을 확인해주세요",-1)),l("div",{ref_key:"recaptchaRef",ref:d,class:"g-recaptcha","data-sitekey":y},null,512)]),l("button",C,V(o.value.role==="buyer"?"거래 등록":"비밀번호 등록"),1)],32)])]))}};export{N as default};
